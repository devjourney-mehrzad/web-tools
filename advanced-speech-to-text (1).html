<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ø¨Ø¯Ù‘Ù„ Ú¯ÙØªØ§Ø± Ø¨Ù‡ Ù…ØªÙ† Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-primary: #0a0e1a;
      --bg-secondary: #0f1420;
      --bg-tertiary: #151a28;
      --accent-primary: #6366f1;
      --accent-secondary: #8b5cf6;
      --accent-tertiary: #ec4899;
      --text-primary: #f8fafc;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --border-subtle: rgba(148, 163, 184, 0.12);
      --border-medium: rgba(148, 163, 184, 0.25);
      --glow-primary: rgba(99, 102, 241, 0.4);
      --glow-secondary: rgba(139, 92, 246, 0.3);
    }

    body.dark {
      --bg-primary: #030712;
      --bg-secondary: #0a0e1a;
      --accent-primary: #06b6d4;
      --accent-secondary: #0ea5e9;
      --glow-primary: rgba(6, 182, 212, 0.35);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes pulse-ring {
      0% {
        transform: scale(0.85);
        opacity: 1;
      }
      50% {
        transform: scale(1.15);
        opacity: 0.5;
      }
      100% {
        transform: scale(1.4);
        opacity: 0;
      }
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    body {
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 50%, #0f1420 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: var(--text-primary);
      overflow-x: hidden;
      position: relative;
    }

    /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¯Ø§Ø± */
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(236, 72, 153, 0.06) 0%, transparent 50%);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Ù‡Ø¯Ø± Ø¨Ø§ Ø§ÙÚ©Øª Ú¯Ù„Ø³ */
    .header {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.08) 0%,
        rgba(255, 255, 255, 0.02) 100%
      );
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-medium);
      border-radius: 24px;
      padding: 16px 24px;
      margin-bottom: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      animation: fadeInUp 0.6s ease-out;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent
      );
      animation: shimmer 3s infinite;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
      position: relative;
      z-index: 2;
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 
        0 0 20px var(--glow-primary),
        0 4px 12px rgba(0, 0, 0, 0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .logo:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 
        0 0 30px var(--glow-primary),
        0 8px 20px rgba(0, 0, 0, 0.6);
    }

    .logo::after {
      content: '';
      position: absolute;
      inset: 8px;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), transparent);
    }

    .title-group h1 {
      font-size: 20px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 4px;
    }

    .title-group p {
      font-size: 13px;
      color: var(--text-muted);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 2;
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: 24px;
      font-size: 12px;
      color: var(--success);
      font-weight: 500;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--success);
      box-shadow: 0 0 8px var(--success);
      animation: pulse-ring 2s infinite;
    }

    /* Ø¯Ú©Ù…Ù‡ ØªÙ… Ø¨Ø§ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† */
    .theme-toggle {
      width: 56px;
      height: 32px;
      background: rgba(15, 20, 32, 0.6);
      border: 1px solid var(--border-medium);
      border-radius: 24px;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      padding: 4px;
    }

    .theme-toggle:hover {
      border-color: var(--accent-primary);
      box-shadow: 0 0 12px var(--glow-primary);
    }

    .theme-toggle-slider {
      position: absolute;
      top: 4px;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 50%;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    body:not(.dark) .theme-toggle-slider {
      right: 4px;
    }

    body.dark .theme-toggle-slider {
      left: 4px;
    }

    /* Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ */
    .main-content {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 24px;
      flex: 1;
      animation: fadeInUp 0.6s ease-out 0.2s both;
    }

    .card {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.06) 0%,
        rgba(255, 255, 255, 0.02) 100%
      );
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-medium);
      border-radius: 24px;
      padding: 24px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .card:hover {
      border-color: var(--border-medium);
      box-shadow: 
        0 12px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(
        90deg,
        transparent,
        var(--accent-primary),
        transparent
      );
      opacity: 0.5;
    }

    .card-header {
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 6px;
      background: linear-gradient(135deg, var(--text-primary), var(--accent-primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .card-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .badge {
      padding: 6px 12px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 20px;
      font-size: 11px;
      color: var(--accent-primary);
      font-weight: 500;
    }

    /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª */
    .settings {
      display: flex;
      gap: 16px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .setting-group {
      flex: 1;
      min-width: 180px;
    }

    .setting-label {
      display: block;
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      font-weight: 500;
    }

    select {
      width: 100%;
      padding: 10px 14px;
      background: rgba(15, 20, 32, 0.6);
      border: 1px solid var(--border-medium);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      outline: none;
    }

    select:hover {
      border-color: var(--accent-primary);
    }

    select:focus {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px var(--glow-primary);
    }

    .checkbox-group {
      display: flex;
      gap: 12px;
      flex-direction: column;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .checkbox-item:hover {
      color: var(--text-primary);
    }

    .checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent-primary);
      cursor: pointer;
    }

    /* Ù†Ø§Ø­ÛŒÙ‡ Ù…ØªÙ† */
    .textarea-wrapper {
      position: relative;
      margin-bottom: 16px;
    }

    textarea {
      width: 100%;
      min-height: 280px;
      padding: 16px;
      background: rgba(10, 14, 26, 0.6);
      border: 1px solid var(--border-medium);
      border-radius: 16px;
      color: var(--text-primary);
      font-size: 14px;
      line-height: 1.8;
      resize: vertical;
      outline: none;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    textarea:focus {
      border-color: var(--accent-primary);
      box-shadow: 
        0 0 0 3px var(--glow-primary),
        0 8px 24px rgba(0, 0, 0, 0.3);
      background: rgba(10, 14, 26, 0.8);
    }

    textarea[dir="ltr"] {
      text-align: left;
      direction: ltr;
    }

    /* Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
    .textarea-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .stats {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(15, 20, 32, 0.6);
      border: 1px solid var(--border-subtle);
      border-radius: 20px;
      font-size: 12px;
      color: var(--text-secondary);
    }

    .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ */
    .btn {
      padding: 10px 18px;
      background: rgba(15, 20, 32, 0.6);
      border: 1px solid var(--border-medium);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      outline: none;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      border-color: var(--accent-primary);
      box-shadow: 0 4px 16px var(--glow-primary);
    }

    .btn:hover::before {
      opacity: 0.1;
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-color: transparent;
      box-shadow: 0 4px 16px var(--glow-primary);
    }

    .btn-primary:hover {
      box-shadow: 0 6px 24px var(--glow-primary);
      transform: translateY(-2px) scale(1.02);
    }

    .btn-danger {
      border-color: rgba(239, 68, 68, 0.5);
      color: var(--danger);
    }

    .btn-danger:hover {
      border-color: var(--danger);
      box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
    }

    .btn svg {
      width: 16px;
      height: 16px;
    }

    /* Ú©Ù†ØªØ±Ù„ Ù…ÛŒÚ©Ø±ÙˆÙÙ† */
    .mic-control {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: 20px 0;
    }

    .mic-button {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border: none;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
        0 8px 32px var(--glow-primary),
        0 0 0 0 var(--glow-primary);
    }

    .mic-button:hover {
      transform: scale(1.05);
      box-shadow: 
        0 12px 40px var(--glow-primary),
        0 0 0 8px rgba(99, 102, 241, 0.2);
    }

    .mic-button.active {
      animation: pulse-ring 1.5s infinite;
      box-shadow: 
        0 12px 40px var(--glow-primary),
        0 0 0 0 var(--glow-primary);
    }

    .mic-button::before {
      content: '';
      position: absolute;
      inset: 8px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), transparent);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .mic-icon {
      width: 40px;
      height: 40px;
      position: relative;
      z-index: 2;
    }

    .mic-capsule {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 16px;
      height: 24px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px 8px 0 0;
    }

    .mic-stand {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 12px;
      border: 2px solid rgba(255, 255, 255, 0.9);
      border-top: none;
      border-radius: 0 0 10px 10px;
    }

    .mic-base {
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 28px;
      height: 3px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 2px;
    }

    .status-display {
      text-align: center;
    }

    .status-text {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }

    .status-text strong {
      color: var(--text-primary);
      font-weight: 600;
    }

    .hint-text {
      font-size: 12px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .hint-text code {
      padding: 2px 6px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 4px;
      font-size: 11px;
      color: var(--accent-primary);
    }

    /* Ø¨Ø®Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª */
    .info-section {
      margin-bottom: 24px;
    }

    .info-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag {
      padding: 6px 12px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 16px;
      font-size: 12px;
      color: var(--text-secondary);
      transition: all 0.2s ease;
    }

    .tag:hover {
      background: rgba(99, 102, 241, 0.15);
      border-color: rgba(99, 102, 241, 0.4);
      color: var(--accent-primary);
    }

    .tips-list {
      list-style: none;
      padding: 0;
    }

    .tips-list li {
      padding: 8px 0;
      padding-right: 20px;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      position: relative;
    }

    .tips-list li::before {
      content: 'â—†';
      position: absolute;
      right: 0;
      color: var(--accent-primary);
      font-size: 10px;
    }

    /* Ù‡Ø´Ø¯Ø§Ø± */
    .alert {
      padding: 12px 16px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 12px;
      color: var(--danger);
      font-size: 12px;
      margin-top: 16px;
      display: none;
      line-height: 1.6;
    }

    .alert.show {
      display: block;
      animation: fadeInUp 0.3s ease-out;
    }

    /* Toast Ø§Ø¹Ù„Ø§Ù† */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      padding: 12px 24px;
      background: rgba(15, 20, 32, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-medium);
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      color: var(--text-primary);
      font-size: 13px;
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .toast-icon {
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 12px var(--glow-primary);
    }

    /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
    @media (max-width: 1024px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 16px;
      }

      .header {
        flex-direction: column;
        gap: 16px;
        align-items: flex-start;
      }

      .header-actions {
        width: 100%;
        justify-content: space-between;
      }

      .card {
        padding: 20px;
      }

      .settings {
        flex-direction: column;
      }

      .setting-group {
        min-width: 100%;
      }

      textarea {
        min-height: 200px;
      }

      .mic-button {
        width: 100px;
        height: 100px;
      }
    }

    @media (max-width: 480px) {
      .textarea-footer {
        flex-direction: column;
        align-items: flex-start;
      }

      .actions {
        width: 100%;
      }

      .btn {
        flex: 1;
        justify-content: center;
      }
    }
  </style>
</head>
<body class="dark">
  <div class="container">
    <!-- Ù‡Ø¯Ø± -->
    <header class="header">
      <div class="logo-section">
        <div class="logo"></div>
        <div class="title-group">
          <h1>ØªØ¨Ø¯ÛŒÙ„ Ú¯ÙØªØ§Ø± Ø¨Ù‡ Ù…ØªÙ†</h1>
          <p>Ø¶Ø¨Ø· Ø²Ù†Ø¯Ù‡ØŒ Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒØŒ Ø®Ø±ÙˆØ¬ÛŒ Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´</p>
        </div>
      </div>
      <div class="header-actions">
        <div class="status-badge">
          <span class="status-dot"></span>
          <span>Web Speech API</span>
        </div>
        <button class="theme-toggle" id="themeToggle" type="button" aria-label="ØªØºÛŒÛŒØ± ØªÙ…">
          <div class="theme-toggle-slider">ğŸŒ™</div>
        </button>
      </div>
    </header>

    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
    <main class="main-content">
      <!-- Ú©Ø§Ø±Øª Ø§ØµÙ„ÛŒ - Ù…ØªÙ† Ø®Ø±ÙˆØ¬ÛŒ -->
      <div class="card">
        <div class="card-header">
          <div>
            <h2 class="card-title">Ù…ØªÙ† Ø®Ø±ÙˆØ¬ÛŒ</h2>
            <p class="card-subtitle">
              Ù‡Ø±Ø¢Ù†Ú†Ù‡ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒÛŒØ¯ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø²Ù†Ø¯Ù‡ Ø¨Ù‡ Ù…ØªÙ† ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯Ø› Ù‚Ø¨Ù„ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯.
            </p>
          </div>
          <span class="badge">ÙÙˆÙ‚ Ø¯Ù‚ÛŒÙ‚ Â· Real-time</span>
        </div>

        <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
        <div class="settings">
          <div class="setting-group">
            <label class="setting-label" for="languageSelect">Ø²Ø¨Ø§Ù† ÙˆØ±ÙˆØ¯ÛŒ</label>
            <select id="languageSelect">
              <option value="fa-IR" selected>ğŸ‡®ğŸ‡· ÙØ§Ø±Ø³ÛŒ (Ø§ÛŒØ±Ø§Ù†)</option>
              <option value="en-US">ğŸ‡ºğŸ‡¸ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (US)</option>
              <option value="en-GB">ğŸ‡¬ğŸ‡§ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (UK)</option>
              <option value="ar-SA">ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÛŒ</option>
              <option value="de-DE">ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†ÛŒ</option>
              <option value="fr-FR">ğŸ‡«ğŸ‡· ÙØ±Ø§Ù†Ø³ÙˆÛŒ</option>
              <option value="tr-TR">ğŸ‡¹ğŸ‡· ØªØ±Ú©ÛŒ Ø§Ø³ØªØ§Ù†Ø¨ÙˆÙ„ÛŒ</option>
            </select>
          </div>
          <div class="setting-group">
            <label class="setting-label">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="autoPunctuation" checked />
                <span>Ø§ÙØ²ÙˆØ¯Ù† Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ù‚Ø·Ù‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø³Ø§Ø¯Ù‡</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="smartMerge" checked />
                <span>Ø§Ø¯ØºØ§Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¬Ù…Ù„Ø§Øª Ú©ÙˆØªØ§Ù‡</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Ù†Ø§Ø­ÛŒÙ‡ Ù…ØªÙ† -->
        <div class="textarea-wrapper">
          <textarea 
            id="transcript" 
            placeholder="Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† Ø¨Ø²Ù†ÛŒØ¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø¨Ù‡ ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯..."
            dir="rtl"
          ></textarea>
        </div>

        <!-- ÙÙˆØªØ± Ù…ØªÙ† -->
        <div class="textarea-footer">
          <div class="stats">
            <div class="stat-item">
              <span>â±</span>
              <span id="durationStat">Ø²Ù…Ø§Ù†: Û°Û°:Û°Û°</span>
            </div>
            <div class="stat-item">
              <span>âœï¸</span>
              <span id="wordsStat">ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§: 0</span>
            </div>
          </div>
          <div class="actions">
            <button class="btn" id="copyBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" />
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
              </svg>
              Ú©Ù¾ÛŒ Ù…ØªÙ†
            </button>
            <button class="btn" id="downloadBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" />
              </svg>
              Ø¯Ø§Ù†Ù„ÙˆØ¯ .txt
            </button>
            <button class="btn btn-danger" id="clearBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6" />
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                <line x1="10" y1="11" x2="10" y2="17" />
                <line x1="14" y1="11" x2="14" y2="17" />
              </svg>
              Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
            </button>
          </div>
        </div>

        <!-- Ù‡Ø´Ø¯Ø§Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ -->
        <div class="alert" id="supportAlert">
          Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Web Speech API Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ Ø§Ø³Øª.
          Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ù†ØªÛŒØ¬Ù‡ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ù†Ø³Ø®Ù‡ Chrome ÛŒØ§ Edge Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
        </div>
      </div>

      <!-- Ú©Ø§Ø±Øª Ú©Ù†ØªØ±Ù„ -->
      <div class="card">
        <div class="card-header">
          <div>
            <h2 class="card-title">Ú©Ù†ØªØ±Ù„ Ø¶Ø¨Ø·</h2>
            <p class="card-subtitle">Ø´Ø±ÙˆØ¹ØŒ ØªÙˆÙ‚Ù Ùˆ Ù¾Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡ ÙˆØ¶Ø¹ÛŒØª ØªØ¨Ø¯ÛŒÙ„ Ú¯ÙØªØ§Ø± Ø¨Ù‡ Ù…ØªÙ†.</p>
          </div>
          <span class="badge" id="engineLabel">Engine: SpeechRecognition</span>
        </div>

        <!-- Ú©Ù†ØªØ±Ù„ Ù…ÛŒÚ©Ø±ÙˆÙÙ† -->
        <div class="mic-control">
          <button class="mic-button" id="micBtn" type="button" aria-label="Ø´Ø±ÙˆØ¹/ØªÙˆÙ‚Ù Ø¶Ø¨Ø·">
            <div class="mic-icon">
              <div class="mic-capsule"></div>
              <div class="mic-stand"></div>
              <div class="mic-base"></div>
            </div>
          </button>
          
          <div class="status-display">
            <div class="status-text" id="statusText">
              <strong>Ø¢Ù…Ø§Ø¯Ù‡</strong> â€” Ø±ÙˆÛŒ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
            </div>
            <div class="hint-text">
              Ù…ÛŒØ§Ù†Ø¨Ø±: <code>Ctrl + Space</code> Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹/ØªÙˆÙ‚Ù
            </div>
          </div>
        </div>

        <!-- Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ -->
        <div class="info-section">
          <h3 class="info-title">Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡</h3>
          <div class="tag-list">
            <span class="tag">ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø¬Ù„Ø³Ø§Øª</span>
            <span class="tag">ØªØ¨Ø¯ÛŒÙ„ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</span>
            <span class="tag">Ù†ÙˆØ´ØªÙ† Ù…ØªÙ† Ø¨Ø¯ÙˆÙ† ØªØ§ÛŒÙ¾</span>
            <span class="tag">Ø¶Ø¨Ø· Ø§ÛŒØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</span>
          </div>
        </div>

        <!-- Ù†Ú©Ø§Øª -->
        <div class="info-section">
          <h3 class="info-title">Ù†Ú©Ø§Øª Ø¨Ø±Ø§ÛŒ Ø¯Ù‚Øª Ø¨Ù‡ØªØ±</h3>
          <ul class="tips-list">
            <li>Ø¯Ø± ÛŒÚ© Ù…Ø­ÛŒØ· Ù†Ø³Ø¨ØªØ§ Ø¢Ø±Ø§Ù… ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯.</li>
            <li>Ø¬Ù…Ù„Ø§Øª Ø±Ø§ Ú©Ù…ÛŒ Ø´Ù…Ø±Ø¯Ù‡ Ùˆ ÙˆØ§Ø¶Ø­ Ø§Ø¯Ø§ Ú©Ù†ÛŒØ¯.</li>
            <li>Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²ØŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡ Â«Ø§ÙØ²ÙˆØ¯Ù† Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ù‚Ø·Ù‡â€ŒÚ¯Ø°Ø§Ø±ÛŒÂ» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</li>
            <li>Ø¯Ø± Ù¾Ø§ÛŒØ§Ù† Ú©Ø§Ø± Ù…ØªÙ† Ø±Ø§ ÛŒÚ© Ø¨Ø§Ø± Ù…Ø±ÙˆØ± Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Ù†Ù‡Ø§ÛŒÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.</li>
          </ul>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Ø§Ø¹Ù„Ø§Ù† -->
  <div class="toast" id="toast">
    <div class="toast-icon">âœ“</div>
    <span id="toastText">Ú©Ù¾ÛŒ Ø´Ø¯!</span>
  </div>

  <script>
    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ùˆ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
    (function() {
      // Ø§Ù„Ù…Ù†Øªâ€ŒÙ‡Ø§ÛŒ DOM
      const elements = {
        transcript: document.getElementById('transcript'),
        micBtn: document.getElementById('micBtn'),
        statusText: document.getElementById('statusText'),
        languageSelect: document.getElementById('languageSelect'),
        autoPunctuation: document.getElementById('autoPunctuation'),
        smartMerge: document.getElementById('smartMerge'),
        supportAlert: document.getElementById('supportAlert'),
        engineLabel: document.getElementById('engineLabel'),
        copyBtn: document.getElementById('copyBtn'),
        clearBtn: document.getElementById('clearBtn'),
        downloadBtn: document.getElementById('downloadBtn'),
        durationStat: document.getElementById('durationStat'),
        wordsStat: document.getElementById('wordsStat'),
        themeToggle: document.getElementById('themeToggle'),
        toast: document.getElementById('toast'),
        toastText: document.getElementById('toastText')
      };

      // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª
      let recognitionInstance = null;
      let isCurrentlyListening = false;
      let fullTranscriptText = '';
      let recordingStartTime = null;
      let timerIntervalId = null;
      let apiSupported = false;

      // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Toast
      function displayToast(message) {
        elements.toastText.textContent = message;
        elements.toast.classList.add('show');
        setTimeout(() => {
          elements.toast.classList.remove('show');
        }, 2500);
      }

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
      function refreshStats() {
        const currentText = elements.transcript.value.trim();
        const wordCount = currentText ? currentText.split(/\s+/).filter(w => w.length > 0).length : 0;
        elements.wordsStat.textContent = 'ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§: ' + wordCount;

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù†
        if (!recordingStartTime || !isCurrentlyListening) {
          elements.durationStat.textContent = 'Ø²Ù…Ø§Ù†: Û°Û°:Û°Û°';
          return;
        }

        const elapsedSeconds = Math.floor((Date.now() - recordingStartTime) / 1000);
        const mins = String(Math.floor(elapsedSeconds / 60)).padStart(2, '0');
        const secs = String(elapsedSeconds % 60).padStart(2, '0');
        elements.durationStat.textContent = `Ø²Ù…Ø§Ù†: ${mins}:${secs}`;
      }

      // ØªÙ†Ø¸ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª
      function updateStatus(message, isActive = false) {
        elements.statusText.innerHTML = message;
        
        if (isActive) {
          elements.micBtn.classList.add('active');
        } else {
          elements.micBtn.classList.remove('active');
        }
      }

      // Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…ØªÙ†
      function normalizeTranscript(text) {
        let processedText = text;
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù†Ù‚Ø·Ù‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
        if (elements.autoPunctuation.checked) {
          processedText = processedText.replace(/\s+([ØŒ\.ØŸ?!])/g, '$1');
          // Ø§Ú¯Ø± Ø¬Ù…Ù„Ù‡ Ù†Ù‚Ø·Ù‡ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
          if (!/[\.ØŸ!]$/.test(processedText.trim()) && processedText.trim().length > 0) {
            processedText = processedText.trim() + '.';
          }
        }

        // Ø§Ø¯ØºØ§Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§
        if (elements.smartMerge.checked) {
          processedText = processedText.replace(/\s{3,}/g, '  ');
        }

        return processedText;
      }

      // ØªÙ†Ø¸ÛŒÙ… Ø¬Ù‡Øª Ù…ØªÙ† Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ø¨Ø§Ù†
      function adjustTextDirection(langCode) {
        // Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø±Ø§Ø³Øª Ø¨Ù‡ Ú†Ù¾
        const rtlLanguages = /^(fa|ar|he|ur)-/;
        
        if (rtlLanguages.test(langCode)) {
          elements.transcript.setAttribute('dir', 'rtl');
        } else {
          elements.transcript.setAttribute('dir', 'ltr');
        }
      }

      // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…ÙˆØªÙˆØ± ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø±
      function setupRecognition() {
        // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±
        const SpeechRecognitionAPI = window.SpeechRecognition || window.webkitSpeechRecognition;
        
        if (!SpeechRecognitionAPI) {
          apiSupported = false;
          elements.supportAlert.classList.add('show');
          updateStatus('<strong>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ø´Ø¯</strong> â€” Ø§ÛŒÙ† Ù…Ø±ÙˆØ±Ú¯Ø± Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø± Ù†Ø¯Ø§Ø±Ø¯');
          elements.engineLabel.textContent = 'Engine: Not available';
          return;
        }

        apiSupported = true;

        // Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÙˆÙ†Ù‡ Ø¬Ø¯ÛŒØ¯
        recognitionInstance = new SpeechRecognitionAPI();
        recognitionInstance.continuous = true;
        recognitionInstance.interimResults = true;
        recognitionInstance.lang = elements.languageSelect.value;

        // Ù†Ù…Ø§ÛŒØ´ Ù†Ø§Ù… Ù…ÙˆØªÙˆØ±
        const engineName = window.SpeechRecognition ? 'SpeechRecognition' : 'webkitSpeechRecognition';
        elements.engineLabel.textContent = 'Engine: ' + engineName;

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø·
        recognitionInstance.onstart = function() {
          isCurrentlyListening = true;
          recordingStartTime = Date.now();
          
          if (timerIntervalId) {
            clearInterval(timerIntervalId);
          }
          timerIntervalId = setInterval(refreshStats, 500);
          
          updateStatus('<strong>Ø¯Ø± Ø­Ø§Ù„ Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†...</strong> â€” Ø¨Ø±Ø§ÛŒ ØªÙˆÙ‚Ù Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯', true);
        };

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø®Ø·Ø§
        recognitionInstance.onerror = function(errorEvent) {
          console.error('Ø®Ø·Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø±:', errorEvent);
          
          let errorMessage = 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡';
          if (errorEvent.error) {
            errorMessage = errorEvent.error;
          }
          
          updateStatus('<strong>Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ</strong> â€” ' + errorMessage);
          elements.supportAlert.classList.add('show');
        };

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ù¾Ø§ÛŒØ§Ù† Ø¶Ø¨Ø·
        recognitionInstance.onend = function() {
          isCurrentlyListening = false;
          
          if (timerIntervalId) {
            clearInterval(timerIntervalId);
          }
          
          refreshStats();
          updateStatus('<strong>Ù…ØªÙˆÙ‚Ù Ø´Ø¯</strong> â€” Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±ÙˆÛŒ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯');
        };

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¯Ø±ÛŒØ§ÙØª Ù†ØªÛŒØ¬Ù‡
        recognitionInstance.onresult = function(resultEvent) {
          let interimText = '';
          
          for (let i = resultEvent.resultIndex; i < resultEvent.results.length; i++) {
            const result = resultEvent.results[i];
            const transcriptPart = result[0].transcript;
            
            if (result.isFinal) {
              // Ù…ØªÙ† Ù†Ù‡Ø§ÛŒÛŒ
              fullTranscriptText += ' ' + transcriptPart;
              fullTranscriptText = normalizeTranscript(fullTranscriptText);
            } else {
              // Ù…ØªÙ† Ù…ÙˆÙ‚Øª
              interimText += transcriptPart;
            }
          }
          
          // ØªØ±Ú©ÛŒØ¨ Ù…ØªÙ† Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ù…ÙˆÙ‚Øª
          const combinedText = (fullTranscriptText + ' ' + interimText).trim();
          elements.transcript.value = combinedText;
          refreshStats();
        };
      }

      // ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø¶Ø¨Ø·
      function toggleRecording() {
        if (!apiSupported || !recognitionInstance) {
          displayToast('Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø² ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.');
          return;
        }

        if (!isCurrentlyListening) {
          // Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø·
          try {
            recognitionInstance.lang = elements.languageSelect.value;
            adjustTextDirection(elements.languageSelect.value);
            recognitionInstance.start();
          } catch (error) {
            console.error('Ø®Ø·Ø§ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø·:', error);
            displayToast('Ø§Ù…Ú©Ø§Ù† Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø· ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
          }
        } else {
          // ØªÙˆÙ‚Ù Ø¶Ø¨Ø·
          try {
            recognitionInstance.stop();
          } catch (error) {
            console.error('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ‚Ù Ø¶Ø¨Ø·:', error);
          }
        }
      }

      // ØªØºÛŒÛŒØ± ØªÙ…
      elements.themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark');
        const slider = elements.themeToggle.querySelector('.theme-toggle-slider');
        slider.textContent = document.body.classList.contains('dark') ? 'ğŸŒ™' : 'â˜€ï¸';
      });

      // Ø¯Ú©Ù…Ù‡ Ù…ÛŒÚ©Ø±ÙˆÙÙ†
      elements.micBtn.addEventListener('click', toggleRecording);

      // Ù…ÛŒØ§Ù†Ø¨Ø± ØµÙØ­Ù‡â€ŒÚ©Ù„ÛŒØ¯
      window.addEventListener('keydown', function(event) {
        if (event.code === 'Space' && (event.ctrlKey || event.metaKey)) {
          event.preventDefault();
          toggleRecording();
        }
      });

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ø¨Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÛŒ
      elements.transcript.addEventListener('input', function() {
        fullTranscriptText = elements.transcript.value;
        refreshStats();
      });

      // ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù†
      elements.languageSelect.addEventListener('change', function() {
        adjustTextDirection(elements.languageSelect.value);
        
        // Ø§Ú¯Ø± Ø¯Ø± Ø­Ø§Ù„ Ø¶Ø¨Ø· Ø¨ÙˆØ¯ØŒ Ù…Ø¬Ø¯Ø¯Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†
        if (isCurrentlyListening && recognitionInstance) {
          recognitionInstance.stop();
          setTimeout(function() {
            toggleRecording();
          }, 300);
        }
      });

      // Ø¯Ú©Ù…Ù‡ Ú©Ù¾ÛŒ
      elements.copyBtn.addEventListener('click', async function() {
        const textToCopy = elements.transcript.value;
        
        if (!textToCopy.trim()) {
          displayToast('Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
          return;
        }

        try {
          // Ø±ÙˆØ´ Ø§ÙˆÙ„: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Clipboard API
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(textToCopy);
          } else {
            // Ø±ÙˆØ´ Ø¯ÙˆÙ…: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² textarea Ù…ÙˆÙ‚Øª
            const tempTextarea = document.createElement('textarea');
            tempTextarea.value = textToCopy;
            tempTextarea.style.position = 'fixed';
            tempTextarea.style.opacity = '0';
            document.body.appendChild(tempTextarea);
            tempTextarea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextarea);
          }
          
          displayToast('Ù…ØªÙ† Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯.');
        } catch (error) {
          console.error('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ:', error);
          displayToast('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ù…ØªÙ†.');
        }
      });

      // Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
      elements.clearBtn.addEventListener('click', function() {
        fullTranscriptText = '';
        elements.transcript.value = '';
        recordingStartTime = null;
        refreshStats();
        displayToast('Ù…ØªÙ† Ù¾Ø§Ú© Ø´Ø¯.');
      });

      // Ø¯Ú©Ù…Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯
      elements.downloadBtn.addEventListener('click', function() {
        const textToDownload = elements.transcript.value;
        
        if (!textToDownload.trim()) {
          displayToast('Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
          return;
        }

        // Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„
        const fileBlob = new Blob([textToDownload], { type: 'text/plain;charset=utf-8' });
        const downloadUrl = URL.createObjectURL(fileBlob);
        
        // Ø§ÛŒØ¬Ø§Ø¯ Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯
        const downloadLink = document.createElement('a');
        downloadLink.href = downloadUrl;
        
        // Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù†
        const currentLang = elements.languageSelect.value || 'fa-IR';
        const currentDate = new Date();
        const dateStamp = currentDate.toISOString().slice(0, 19).replace(/[:T]/g, '-');
        downloadLink.download = `speech-to-text-${currentLang}-${dateStamp}.txt`;
        
        // Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
        URL.revokeObjectURL(downloadUrl);
        
        displayToast('ÙØ§ÛŒÙ„ Ù…ØªÙ†ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯.');
      });

      // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
      setupRecognition();
      adjustTextDirection(elements.languageSelect.value);
      refreshStats();
    })();
  </script>
</body>
</html>